{"processing_server":"dub","pipelines":[{"spec":{"name":"main","description":"","inputs":[],"outputs":[],"parameters":[]},"steps":[{"step_type":"pipeline","pipeline_name":"synthesize","inputs":{},"outputs":{"raw":"raw","geom":"geom","waveforms_true":"waveforms_true","firings_true":"firings_true"},"parameters":{"duration":"600","samplerate":"30000"}},{"step_type":"pipeline","pipeline_name":"sort_ms3","inputs":{"raw":"raw","geom":"geom"},"outputs":{"firings_out":"firings","filt":"filt","pre":"pre"},"parameters":{"samplerate":"","detect_sign":"1","adjacency_radius":"100"}},{"step_type":"pipeline","pipeline_name":"create_mv2","inputs":{"raw":"raw","filt":"filt","pre":"pre","firings":"firings"},"outputs":{"output":"output.mv2"},"parameters":{"samplerate":"30000"}}],"input_files":[],"output_files":[]},{"name":"sort_ms3","script":"/* Define the spec */\ninputs_opt('raw','filt','pre','geom');\noutputs('firings_out');\noutputs_opt('filt','pre');\nparam('samplerate',30000);\nparam('freq_min',300);\nparam('freq_max',6000);\nparam('freq_wid',1000);\nparam('whiten','true');\nparam('detect_threshold',3);\nparam('detect_sign',0);\nparam('adjacency_radius',0);\n      \n\n_Pipeline.run=function(X) {\n  var pp=X.parameters;\n  if ((!X.hasInput('filt'))&&(!X.hasInput('pre'))) {\n    X.runProcess('ms3.bandpass_filter',\n                 {timeseries:'raw'},\n                 {timeseries_out:'filt'},\n                 {samplerate:pp.samplerate,freq_min:pp.freq_min,freq_max:pp.freq_max,freq_wid:pp.freq_wid}\n                );\n  }\n  \n  if (!X.hasInput('pre')) {\n    if (pp.whiten=='true') {\n      X.runProcess('ms3.whiten',\n                   {timeseries:'filt'},\n                   {timeseries_out:'pre'},\n                   {}\n                  );\n    }\n    else {\n      X.runProcess('pyms.normalize_channels',\n                   {timeseries:'filt'},\n                   {timeseries_out:'pre'},\n                   {}\n                  );\n    }\n  }\n  \n  var p={\n    detect_threshold:pp.detect_threshold,\n    detect_sign:pp.detect_sign,\n    adjacency_radius:pp.adjacency_radius\n  };\n  var geom='';\n  if (X.hasInput('geom')) {\n    geom='geom';\n    p.adjacency_radius=pp.adjacency_radius;\n  }\n  X.runProcess('mountainsortalg.ms3',\n               {timeseries:'pre'},\n               {firings_out:'firings_out'},\n               p);\n               \n};\n\n/////////////////////////////////////////////////////////////////////\n\n\nfunction param(str,val) {\n      if (val===undefined) {\n        _Pipeline.spec.parameters.push({name:str});\n      }\n      else {\n        console.log('opt');\n        _Pipeline.spec.parameters.push({name:str,optional:true,default_value:val});\n      }\n}\n                \nfunction inputs(str1,str2,str3,str4) {\n  if (str1) _Pipeline.spec.inputs.push({name:str1});\n  if (str2) _Pipeline.spec.inputs.push({name:str2});\n  if (str3) _Pipeline.spec.inputs.push({name:str3});\n  if (str4) _Pipeline.spec.inputs.push({name:str4});\n}\n\nfunction inputs_opt(str1,str2,str3,str4) {\n  if (str1) _Pipeline.spec.inputs.push({name:str1,optional:true});\n  if (str2) _Pipeline.spec.inputs.push({name:str2,optional:true});\n  if (str3) _Pipeline.spec.inputs.push({name:str3,optional:true});\n  if (str4) _Pipeline.spec.inputs.push({name:str4,optional:true});\n}\n\nfunction outputs(str1,str2,str3,str4) {\n  if (str1) _Pipeline.spec.outputs.push({name:str1});\n  if (str2) _Pipeline.spec.outputs.push({name:str2});\n  if (str3) _Pipeline.spec.outputs.push({name:str3});\n  if (str4) _Pipeline.spec.outputs.push({name:str4});\n}\n\nfunction outputs_opt(str1,str2,str3,str4) {\n  if (str1) _Pipeline.spec.outputs.push({name:str1,optional:true});\n  if (str2) _Pipeline.spec.outputs.push({name:str2,optional:true});\n  if (str3) _Pipeline.spec.outputs.push({name:str3,optional:true});\n  if (str4) _Pipeline.spec.outputs.push({name:str4,optional:true});\n}","steps":[],"spec":{"name":"","description":"","inputs":[],"outputs":[],"parameters":[]}},{"spec":{"name":"create_mv2","description":"","inputs":[{"name":"raw"},{"name":"filt"},{"name":"pre"},{"name":"firings"}],"outputs":[{"name":"output"}],"parameters":[{"name":"samplerate"}]},"steps":[{"step_type":"json_output","inputs":{"raw":"raw","filt":"filt","pre":"pre","firings":"firings"},"outputs":{"output":"output"},"parameters":{"samplerate":"${samplerate}"},"content":{"samplerate":"${samplerate}","firings":"${firings}","timeseries":{"Raw Data":{"name":"Raw Data","data":"${raw}"},"Filtered Data":{"name":"Filtered Data","data":"${filt}"},"Preprocessed Data":{"name":"Preprocessed Data","data":"${pre}"}}}}],"input_files":[],"output_files":[]},{"spec":{"name":"synthesize","description":"","inputs":[],"outputs":[{"name":"raw"},{"name":"geom"},{"name":"waveforms_true"},{"name":"firings_true"}],"parameters":[{"name":"duration","description":"Durations of simulated dataset in seconds"},{"name":"samplerate"}]},"steps":[{"step_type":"processor","processor_name":"pyms.synthesize_random_waveforms","inputs":{},"outputs":{"waveforms_out":"waveforms_true","geometry_out":"geom"},"parameters":{"upsamplefac":"13"}},{"step_type":"processor","processor_name":"pyms.synthesize_random_firings","inputs":{},"outputs":{"firings_out":"firings_true"},"parameters":{"samplerate":"${samplerate}","duration":"${duration}"}},{"step_type":"processor","processor_name":"pyms.synthesize_timeseries","inputs":{"firings":"firings_true","waveforms":"waveforms_true"},"outputs":{"timeseries_out":"raw"},"parameters":{"duration":"${duration}","waveform_upsamplefac":"13"}}],"input_files":[],"output_files":[]}],"input_files":[],"output_files":[{"prv":{"original_checksum":"28a245abbcde1ed241626ac14a87dc04208ea2c0","original_fcs":"head1000-8a2c296c11543fde31163c3be2c56b435129ff0f","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_97e0e260b4","original_size":360000020,"prv_version":"0.11"},"name":"filt","on_s3":false,"s3_address":""},{"prv":{"original_checksum":"7b845b93d3f33f82412d98a6b3d3662f1571cbd6","original_fcs":"head1000-94c637d2893ebda5064c265d21a39c99a6abf1e8","original_path":"/home/magland/prvbucket/_mountainprocess/output_firings_out_9df0e68f41","original_size":1404644,"prv_version":"0.11"},"name":"firings","on_s3":false,"s3_address":""},{"prv":{"original_checksum":"052d313f34395df503260b3a5bcd1e0f24e55b80","original_fcs":"head1000-0390f61c6e177f560cf93fbf13bbaecd0973f40b","original_path":"/home/magland/prvbucket/_mountainprocess/output_firings_out_e857934248","original_size":664556,"prv_version":"0.11"},"name":"firings_true","on_s3":false,"s3_address":""},{"prv":{"original_checksum":"baa4efd40e96d2f1df2e38bc9caaef4db947fae5","original_fcs":"head1000-baa4efd40e96d2f1df2e38bc9caaef4db947fae5","original_path":"/home/magland/prvbucket/_mountainprocess/output_geometry_out_635f2903f9","original_size":20,"prv_version":"0.11"},"name":"geom","on_s3":false,"s3_address":""},{"content":{"samplerate":"30000","firings":{"original_checksum":"7b845b93d3f33f82412d98a6b3d3662f1571cbd6","original_fcs":"head1000-94c637d2893ebda5064c265d21a39c99a6abf1e8","original_path":"/home/magland/prvbucket/_mountainprocess/output_firings_out_9df0e68f41","original_size":1404644,"prv_version":"0.11"},"timeseries":{"Raw Data":{"name":"Raw Data","data":{"original_checksum":"17d841d9bd3dcb55be76dc7045ca56fce7906914","original_fcs":"head1000-ab53a46197fb990b90012e561838c5bb28fe03b4","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_ff1acb3c1b","original_size":360000020,"prv_version":"0.11"}},"Filtered Data":{"name":"Filtered Data","data":{"original_checksum":"28a245abbcde1ed241626ac14a87dc04208ea2c0","original_fcs":"head1000-8a2c296c11543fde31163c3be2c56b435129ff0f","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_97e0e260b4","original_size":360000020,"prv_version":"0.11"}},"Preprocessed Data":{"name":"Preprocessed Data","data":{"original_checksum":"411ebe07d608bb7964b820cd3fb1655153ea5709","original_fcs":"head1000-d3038a90ae139a4deaa6880b8cf5c359f405b3c2","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_912bd5d690","original_size":360000020,"prv_version":"0.11"}}}},"name":"output.mv2"},{"prv":{"original_checksum":"411ebe07d608bb7964b820cd3fb1655153ea5709","original_fcs":"head1000-d3038a90ae139a4deaa6880b8cf5c359f405b3c2","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_912bd5d690","original_size":360000020,"prv_version":"0.11"},"name":"pre","on_s3":false,"s3_address":""},{"prv":{"original_checksum":"17d841d9bd3dcb55be76dc7045ca56fce7906914","original_fcs":"head1000-ab53a46197fb990b90012e561838c5bb28fe03b4","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_ff1acb3c1b","original_size":360000020,"prv_version":"0.11"},"name":"raw","on_s3":false,"s3_address":""},{"prv":{"original_checksum":"cf13bbcb93165fce8ec59a40c8370e005da3f703","original_fcs":"head1000-8f47505a5ee71278da8cfb73a953a5bc09b25b51","original_path":"/home/magland/prvbucket/_mountainprocess/output_waveforms_out_635f2903f9","original_size":2600024,"prv_version":"0.11"},"name":"waveforms_true","on_s3":false,"s3_address":""}],"jobs":[{"parent_pipeline_name":"main","step":{"step_type":"pipeline","pipeline_name":"synthesize","inputs":{},"outputs":{"raw":"raw","geom":"geom","waveforms_true":"waveforms_true","firings_true":"firings_true"},"parameters":{"duration":"600","samplerate":"30000"}},"input_files":{},"output_files":{"raw":{"prv":{"original_checksum":"17d841d9bd3dcb55be76dc7045ca56fce7906914","original_fcs":"head1000-ab53a46197fb990b90012e561838c5bb28fe03b4","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_ff1acb3c1b","original_size":360000020,"prv_version":"0.11"}},"geom":{"prv":{"original_checksum":"baa4efd40e96d2f1df2e38bc9caaef4db947fae5","original_fcs":"head1000-baa4efd40e96d2f1df2e38bc9caaef4db947fae5","original_path":"/home/magland/prvbucket/_mountainprocess/output_geometry_out_635f2903f9","original_size":20,"prv_version":"0.11"}},"waveforms_true":{"prv":{"original_checksum":"cf13bbcb93165fce8ec59a40c8370e005da3f703","original_fcs":"head1000-8f47505a5ee71278da8cfb73a953a5bc09b25b51","original_path":"/home/magland/prvbucket/_mountainprocess/output_waveforms_out_635f2903f9","original_size":2600024,"prv_version":"0.11"}},"firings_true":{"prv":{"original_checksum":"052d313f34395df503260b3a5bcd1e0f24e55b80","original_fcs":"head1000-0390f61c6e177f560cf93fbf13bbaecd0973f40b","original_path":"/home/magland/prvbucket/_mountainprocess/output_firings_out_e857934248","original_size":664556,"prv_version":"0.11"}}},"parameters":{"duration":"600","samplerate":"30000"},"status":"finished","error":"","process_id":""},{"parent_pipeline_name":"main","step":{"step_type":"pipeline","pipeline_name":"sort_ms3","inputs":{"raw":"raw","geom":"geom"},"outputs":{"firings_out":"firings","filt":"filt","pre":"pre"},"parameters":{"samplerate":"","detect_sign":"1","adjacency_radius":"100"}},"input_files":{"raw":{"prv":{"original_checksum":"17d841d9bd3dcb55be76dc7045ca56fce7906914","original_fcs":"head1000-ab53a46197fb990b90012e561838c5bb28fe03b4","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_ff1acb3c1b","original_size":360000020,"prv_version":"0.11"}},"geom":{"prv":{"original_checksum":"baa4efd40e96d2f1df2e38bc9caaef4db947fae5","original_fcs":"head1000-baa4efd40e96d2f1df2e38bc9caaef4db947fae5","original_path":"/home/magland/prvbucket/_mountainprocess/output_geometry_out_635f2903f9","original_size":20,"prv_version":"0.11"}}},"output_files":{"firings_out":{"prv":{"original_checksum":"7b845b93d3f33f82412d98a6b3d3662f1571cbd6","original_fcs":"head1000-94c637d2893ebda5064c265d21a39c99a6abf1e8","original_path":"/home/magland/prvbucket/_mountainprocess/output_firings_out_9df0e68f41","original_size":1404644,"prv_version":"0.11"}},"filt":{"prv":{"original_checksum":"28a245abbcde1ed241626ac14a87dc04208ea2c0","original_fcs":"head1000-8a2c296c11543fde31163c3be2c56b435129ff0f","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_97e0e260b4","original_size":360000020,"prv_version":"0.11"}},"pre":{"prv":{"original_checksum":"411ebe07d608bb7964b820cd3fb1655153ea5709","original_fcs":"head1000-d3038a90ae139a4deaa6880b8cf5c359f405b3c2","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_912bd5d690","original_size":360000020,"prv_version":"0.11"}}},"parameters":{"samplerate":"","freq_min":300,"freq_max":6000,"freq_wid":1000,"whiten":"true","detect_threshold":3,"detect_sign":"1","adjacency_radius":"100"},"status":"finished","error":"","process_id":""},{"parent_pipeline_name":"main","step":{"step_type":"pipeline","pipeline_name":"create_mv2","inputs":{"raw":"raw","filt":"filt","pre":"pre","firings":"firings"},"outputs":{"output":"output.mv2"},"parameters":{"samplerate":"30000"}},"input_files":{"raw":{"prv":{"original_checksum":"17d841d9bd3dcb55be76dc7045ca56fce7906914","original_fcs":"head1000-ab53a46197fb990b90012e561838c5bb28fe03b4","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_ff1acb3c1b","original_size":360000020,"prv_version":"0.11"}},"filt":{"prv":{"original_checksum":"28a245abbcde1ed241626ac14a87dc04208ea2c0","original_fcs":"head1000-8a2c296c11543fde31163c3be2c56b435129ff0f","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_97e0e260b4","original_size":360000020,"prv_version":"0.11"}},"pre":{"prv":{"original_checksum":"411ebe07d608bb7964b820cd3fb1655153ea5709","original_fcs":"head1000-d3038a90ae139a4deaa6880b8cf5c359f405b3c2","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_912bd5d690","original_size":360000020,"prv_version":"0.11"}},"firings":{"prv":{"original_checksum":"7b845b93d3f33f82412d98a6b3d3662f1571cbd6","original_fcs":"head1000-94c637d2893ebda5064c265d21a39c99a6abf1e8","original_path":"/home/magland/prvbucket/_mountainprocess/output_firings_out_9df0e68f41","original_size":1404644,"prv_version":"0.11"}}},"output_files":{"output":{"content":{"samplerate":"30000","firings":{"original_checksum":"7b845b93d3f33f82412d98a6b3d3662f1571cbd6","original_fcs":"head1000-94c637d2893ebda5064c265d21a39c99a6abf1e8","original_path":"/home/magland/prvbucket/_mountainprocess/output_firings_out_9df0e68f41","original_size":1404644,"prv_version":"0.11"},"timeseries":{"Raw Data":{"name":"Raw Data","data":{"original_checksum":"17d841d9bd3dcb55be76dc7045ca56fce7906914","original_fcs":"head1000-ab53a46197fb990b90012e561838c5bb28fe03b4","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_ff1acb3c1b","original_size":360000020,"prv_version":"0.11"}},"Filtered Data":{"name":"Filtered Data","data":{"original_checksum":"28a245abbcde1ed241626ac14a87dc04208ea2c0","original_fcs":"head1000-8a2c296c11543fde31163c3be2c56b435129ff0f","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_97e0e260b4","original_size":360000020,"prv_version":"0.11"}},"Preprocessed Data":{"name":"Preprocessed Data","data":{"original_checksum":"411ebe07d608bb7964b820cd3fb1655153ea5709","original_fcs":"head1000-d3038a90ae139a4deaa6880b8cf5c359f405b3c2","original_path":"/home/magland/prvbucket/_mountainprocess/output_timeseries_out_912bd5d690","original_size":360000020,"prv_version":"0.11"}}}}}},"parameters":{"samplerate":"30000"},"status":"finished","error":"","process_id":""}]}